{
  "name": "Pregnancy System - Part 2 (Guidance & Display)",
  "description": "æ€€å­•ç³»ç»Ÿç¬¬äºŒéƒ¨åˆ†ï¼šLLMæŒ‡å¯¼å’ŒçŠ¶æ€æ˜¾ç¤º",
  "entries": [
    {
      "uid": 7,
      "key": [],
      "keysecondary": [],
      "comment": "[GENERATE:BEFORE] Labor Stage Guidance",
      "content": "@@generate_before\n<%\n// LLM åˆ†å¨©é˜¶æ®µæŒ‡å¯¼\nconst allVars = variables;\nconst guidances = [];\n\nfor (const key in allVars) {\n    if (key.startsWith('pregnancy.') && !key.includes('.config')) {\n        const charName = key.replace('pregnancy.', '');\n        const data = getvar(key);\n        \n        if (!data) continue;\n        \n        // äº§å‰é˜µç—›\n        if (data.laborStage === 'prelabor') {\n            guidances.push(`\n<PhysiologicalState character=\"${charName}\" condition=\"prelabor\">\nã€å®¢è§‚ç”Ÿç†çŠ¶æ€ã€‘\n- é˜¶æ®µ: äº§å‰é˜µç—›ï¼ˆæ—©æœŸäº§ç¨‹ï¼‰\n- è¿›åº¦: ${data.laborHours.toFixed(1)}å°æ—¶ / 3å°æ—¶\n- å®«ç¼©å¼ºåº¦: ${data.contractionLevel}/10\n- ç–¼ç—›ç­‰çº§: ${data.contractionLevel < 3 ? 'è½»å¾®ä¸é€‚' : data.contractionLevel < 6 ? 'ä¸­ç­‰ç–¼ç—›' : data.contractionLevel < 9 ? 'ä¸¥é‡ç–¼ç—›' : 'å‰§çƒˆç–¼ç—›'}\n- ç¾Šæ°´çŠ¶æ€: âŒ å°šæœªç ´è£‚\n\nã€ç‰©ç†äº‹å®ã€‘\n- âš ï¸ ç¾Šæ°´å°šæœªç ´è£‚ï¼Œç¦æ­¢æè¿°ç ´æ°´ã€ç¾Šæ°´æµå‡ºç­‰å†…å®¹\n- âœ… å®«ç¼©ä¼šé€æ¸å¢å¼º\n- âœ… å¯ä»¥ç§»åŠ¨ã€è¯´è¯ã€é‡‡å–ä¸åŒå§¿åŠ¿\n\nã€æ€§æ ¼å·®å¼‚ç¤ºä¾‹ã€‘\n- å†·æ¼ å‹: \"å•§ï¼Œå¼€å§‹äº†å—...çœŸéº»çƒ¦\" / é¢æ— è¡¨æƒ…åœ°å¿è€\n- åšå¼ºå‹: å’¬ç‰™ä¸å‡ºå£° / \"è¿˜èƒ½å¿å—\"\n- è„†å¼±å‹: å‘»åŸã€å“­æ³£ã€æŠ“ç´§ä»–äººçš„æ‰‹\n- æ„¤æ€’å‹: \"éƒ½æ˜¯ä½ å®³çš„ï¼\" / è¿æ€’ä»–äºº\n- å¹³é™å‹: æ·±å‘¼å¸è°ƒæ•´ / æŒ‰ç…§æŒ‡å¯¼åº”å¯¹\n</PhysiologicalState>\n            `.trim());\n        }\n        \n        // ç¬¬ä¸€äº§ç¨‹\n        if (data.laborStage === 'stage1') {\n            const justBroke = data.laborHours <= 3.2;\n            guidances.push(`\n<PhysiologicalState character=\"${charName}\" condition=\"stage1_labor\">\nã€å®¢è§‚ç”Ÿç†çŠ¶æ€ã€‘\n- é˜¶æ®µ: ç¬¬ä¸€äº§ç¨‹ï¼ˆç ´æ°´æœŸï¼‰\n- è¿›åº¦: ${data.laborHours.toFixed(1)}å°æ—¶ / 6å°æ—¶ï¼ˆè¿›åº¦${data.birthProgress}%ï¼‰\n- ç¾Šæ°´çŠ¶æ€: ${justBroke ? 'âœ¨ åˆšåˆšç ´è£‚ï¼ç¾Šæ°´æ¶Œå‡º' : 'âœ… å·²ç ´æ°´'}\n- å®«å£æ‰©å¼ : ${Math.floor(data.birthProgress / 40 * 10)}cm / 10cm\n- ç–¼ç—›ç­‰çº§: å‰§çƒˆç–¼ç—›\n\n${justBroke ? 'ã€ç ´æ°´æ„Ÿè§‰ã€‘\\n- æ¸©çƒ­æ¶²ä½“æ¶Œå‡ºï¼Œæ— æ³•æ§åˆ¶\\n- è…¹éƒ¨å‹åŠ›çªç„¶é‡Šæ”¾\\n' : ''}\nã€ç”Ÿç†æ„Ÿå—ã€‘\n- ä¸‹è…¹éƒ¨: å¼ºçƒˆçš„ä¸‹å æ„Ÿï¼Œèƒå¤´å‹è¿«\n- å®«ç¼©: æ¯2-3åˆ†é’Ÿä¸€æ¬¡ï¼Œæ¯æ¬¡æŒç»­60-90ç§’\n- è‚›é—¨: æ˜æ˜¾çš„å‹è¿«æ„Ÿ\n\nã€æ€§æ ¼å·®å¼‚ç¤ºä¾‹ã€‘\n- å†·æ¼ å‹: \"ç»§ç»­å§...\" / æœºæ¢°åœ°é…åˆ\n- åšå¼ºå‹: æ±—æ°´æ¹¿é€ä½†ä¸å«å–Š\n- è„†å¼±å‹: å¤§å£°å“­å–Š / \"æˆ‘ä¸è¡Œäº†ï¼\"\n- æš´èºå‹: å’’éª‚ã€æ¨å¼€ä»–äºº\n</PhysiologicalState>\n            `.trim());\n        }\n        \n        // ç¬¬äºŒäº§ç¨‹\n        if (data.laborStage === 'stage2') {\n            const visibleParts = [];\n            if (data.birthProgress >= 50) visibleParts.push('å¤´é¡¶');\n            if (data.birthProgress >= 70) visibleParts.push('é¢éƒ¨');\n            if (data.birthProgress >= 85) visibleParts.push('è‚©è†€');\n            if (data.birthProgress >= 95) visibleParts.push('èº«ä½“');\n            \n            guidances.push(`\n<PhysiologicalState character=\"${charName}\" condition=\"stage2_labor\">\nã€å®¢è§‚ç”Ÿç†çŠ¶æ€ã€‘\n- é˜¶æ®µ: ç¬¬äºŒäº§ç¨‹ï¼ˆå¨©å‡ºæœŸï¼‰\n- è¿›åº¦: ${data.laborHours.toFixed(1)}å°æ—¶ / 9å°æ—¶ï¼ˆå¨©å‡º${data.birthProgress}%ï¼‰\n- å®«å£: å·²å…¨å¼€ï¼ˆ10cmï¼‰\n- å¯è§éƒ¨ä½: ${visibleParts.length > 0 ? visibleParts.join(' â†’ ') : 'å°šæœªæ˜¾éœ²'}\n- ç–¼ç—›ç­‰çº§: æåº¦å‰§çƒˆ\n\nã€ç”Ÿç†æ„Ÿå—ã€‘\n- ä¼šé˜´: å¼ºçƒˆæ’•è£‚æ„Ÿå’Œå‹è¿«æ„Ÿ\n- ç”¨åŠ›å†²åŠ¨: æ— æ³•æŠ‘åˆ¶\n- ä½“åŠ›: æåº¦æ¶ˆè€—\n\nã€æ€§æ ¼å·®å¼‚ç¤ºä¾‹ã€‘\n- å†·æ¼ å‹: æœºæ¢°åœ°ç”¨åŠ› / \"å¿«ç‚¹ç»“æŸå§\" / å¯¹å³å°†å‡ºç”Ÿçš„å©´å„¿æ— æ„Ÿ\n- åšå¼ºå‹: å’¬ç´§ç‰™å…³ä¸å«å–Š\n- å´©æºƒå‹: å°–å«ã€å“­æ³£\n- æ¯æ€§å‹: \"ä¸ºäº†å®å®\" / æƒ³è±¡å³å°†è§é¢\n</PhysiologicalState>\n            `.trim());\n        }\n        \n        // åˆ†å¨©å®Œæˆ\n        if (data.laborStage === 'delivered') {\n            guidances.push(`\n<PhysiologicalState character=\"${charName}\" condition=\"delivered\">\nã€å®¢è§‚ç”Ÿç†çŠ¶æ€ã€‘\n- é˜¶æ®µ: åˆ†å¨©å®Œæˆ\n- æ€»äº§ç¨‹: ${data.laborHours.toFixed(1)}å°æ—¶\n- æ–°ç”Ÿå„¿: å·²å®Œå…¨å¨©å‡º\n- çŠ¶æ€: æåº¦ç–²æƒ«\n\nã€æ€§æ ¼å·®å¼‚ç¤ºä¾‹ã€‘\n- å†·æ¼ å‹: \"ç»ˆäºç»“æŸäº†\" / å¯¹å©´å„¿å…´è¶£ä¸å¤§\n- æ¯æ€§å‹: ç«‹åˆ»æƒ³æŠ±å­©å­ / \"æˆ‘çš„å®è´\"\n- å´©æºƒå‹: å“­æ³£ä¸æ­¢\n- æ„¤æ€’å‹: \"éƒ½æ˜¯è¿™ä¸ªå­©å­å®³çš„\"\n</PhysiologicalState>\n            `.trim());\n        }\n    }\n}\n\nif (guidances.length > 0) {\n    injectPrompt('labor_guidance', guidances.join('\\n\\n'));\n}\n_%>",
      "constant": false,
      "selective": false,
      "selectiveLogic": 0,
      "addMemo": true,
      "order": 46,
      "position": 0,
      "disable": false,
      "excludeRecursion": false,
      "probability": 100,
      "useProbability": true
    },
    {
      "uid": 8,
      "key": [],
      "keysecondary": [],
      "comment": "[GENERATE:BEFORE] Awareness Guidance",
      "content": "@@generate_before\n<%\n// å¯Ÿè§‰åº¦é˜¶æ®µ LLM æŒ‡å¯¼\nconst allVars = variables;\nconst guidances = [];\n\nfunction getSymptomsByWeek(weeks) {\n    const symptoms = [];\n    if (weeks < 4) symptoms.push('- å¯èƒ½è¿˜æ²¡æœ‰æ˜æ˜¾ç—‡çŠ¶');\n    if (weeks >= 4) {\n        symptoms.push('- æœˆç»åœæ­¢');\n        symptoms.push('- ä¹³æˆ¿å¼€å§‹èƒ€ç—›');\n    }\n    if (weeks >= 6) {\n        symptoms.push('- æ™¨èµ·æ¶å¿ƒã€å­•å');\n        symptoms.push('- ç–²åŠ³ã€å—œç¡');\n    }\n    if (weeks >= 12) {\n        symptoms.push('- è…¹éƒ¨å¾®å¾®éš†èµ·');\n        symptoms.push('- å°¿é¢‘');\n    }\n    if (weeks >= 20) {\n        symptoms.push('- èƒåŠ¨ï¼ˆå¯æ„Ÿå—åˆ°èƒå„¿è¸¢åŠ¨ï¼‰');\n        symptoms.push('- è…¹éƒ¨æ˜¾è‘—å¢å¤§');\n    }\n    if (weeks >= 28) {\n        symptoms.push('- è…¹éƒ¨éå¸¸å¤§');\n        symptoms.push('- è¡ŒåŠ¨ä¸ä¾¿');\n    }\n    return symptoms.length > 0 ? symptoms.join('\\n') : '- æš‚æ— æ˜æ˜¾ç—‡çŠ¶';\n}\n\nfor (const key in allVars) {\n    if (key.startsWith('pregnancy.') && !key.includes('.config')) {\n        const charName = key.replace('pregnancy.', '');\n        const data = getvar(key);\n        \n        if (!data || !data.isPregnant) continue;\n        \n        const info = pregnancySystem.getAwarenessStageInfo(charName);\n        const weeks = Math.floor(data.days / 7);\n        \n        // æ— æ„è¯†æœŸ\n        if (data.awarenessStage === 'unaware') {\n            guidances.push(`\n<PregnancyAwareness character=\"${charName}\" stage=\"unaware\" awareness=\"${data.awareness}\">\nã€è§’è‰²è®¤çŸ¥çŠ¶æ€ã€‘${info.icon} ${info.name}ï¼ˆå¯Ÿè§‰åº¦: ${data.awareness}/100ï¼‰\n\nã€æ ¸å¿ƒåŸåˆ™ã€‘\nâš ï¸ ${charName} å®Œå…¨ä¸çŸ¥é“è‡ªå·±æ€€å­•ï¼\n\nã€å½“å‰å®¢è§‚ç—‡çŠ¶ã€‘ï¼ˆè§’è‰²èƒ½æ„Ÿå—åˆ°ï¼Œä½†ä¸ç†è§£ï¼‰\n${getSymptomsByWeek(weeks)}\n\nã€è§’è‰²å¯èƒ½çš„é”™è¯¯å½’å› ã€‘\n- æœˆç»æ¨è¿Ÿ â†’ \"æœ€è¿‘å‹åŠ›å¤ªå¤§äº†\"\n- å­•åæ¶å¿ƒ â†’ \"åƒåä¸œè¥¿äº†\" / \"èƒƒç—…\"\n- ç–²åŠ³å—œç¡ â†’ \"æœ€è¿‘å¤ªç´¯äº†\"\n- è…¹éƒ¨å¾®éš† â†’ \"æœ€è¿‘èƒ–äº†\" / å®Œå…¨æ²¡æ³¨æ„åˆ°\n\nã€ç¦æ­¢è¡Œä¸ºã€‘\n- âŒ ä¸è¦è®©è§’è‰²è¯´å‡º\"æˆ‘æ€€å­•äº†\"\n- âŒ ä¸è¦è®©è§’è‰²è¡¨ç°å‡ºå¯¹æ€€å­•çš„è®¤çŸ¥\n- âŒ ä¸è¦è®©è§’è‰²æŠšæ‘¸è‚šå­å¹¶æƒ³\"å®å®\"\n\nã€å…è®¸æè¿°ã€‘\n- âœ… è§’è‰²æ³¨æ„åˆ°èº«ä½“å˜åŒ–å¹¶æ„Ÿåˆ°å›°æƒ‘\n- âœ… æ ¹æ®æ€§æ ¼ï¼šå¯èƒ½å®Œå…¨å¿½ç•¥ç—‡çŠ¶/å¯èƒ½å¼€å§‹æ‹…å¿ƒå¥åº·é—®é¢˜\n</PregnancyAwareness>\n            `.trim());\n        }\n        \n        // æ€€ç–‘æœŸ\n        else if (data.awarenessStage === 'suspect') {\n            guidances.push(`\n<PregnancyAwareness character=\"${charName}\" stage=\"suspect\" awareness=\"${data.awareness}\">\nã€è§’è‰²è®¤çŸ¥çŠ¶æ€ã€‘${info.icon} ${info.name}ï¼ˆå¯Ÿè§‰åº¦: ${data.awareness}/100ï¼‰\n\nã€æ ¸å¿ƒåŸåˆ™ã€‘\nğŸ¤” ${charName} å¼€å§‹æ€€ç–‘è‡ªå·±å¯èƒ½æ€€å­•ï¼Œä½†è¿˜ä¸ç¡®å®š\n\nã€å½“å‰å®¢è§‚ç—‡çŠ¶ã€‘\n${getSymptomsByWeek(weeks)}\n\nã€è§’è‰²å¿ƒç†çŠ¶æ€ã€‘\n- åŠä¿¡åŠç–‘ï¼š\"è¯¥ä¸ä¼šæ˜¯...ä¸ï¼Œä¸å¯èƒ½å§\"\n- çŠ¹è±«ä¸å†³ï¼šæƒ³å»æ£€æŸ¥åˆå®³æ€•/ä¸æƒ³é¢å¯¹\n- å¯»æ‰¾è¯æ®ï¼šè§‚å¯Ÿè‡ªå·±çš„èº«ä½“å˜åŒ–\n\nã€å…è®¸æè¿°ã€‘\n- âœ… è§’è‰²ç§ä¸‹æµ‹è¯•ï¼ˆéªŒå­•æ£’ã€æ•°æœˆç»å‘¨æœŸï¼‰\n- âœ… è§’è‰²åœ¨çŠ¹è±«è¦ä¸è¦å‘Šè¯‰åˆ«äºº/å»æ£€æŸ¥\n- âœ… æ ¹æ®æ€§æ ¼ï¼šææ…Œ/å†·é™åˆ†æ/é€ƒé¿/æ„¤æ€’\n\nã€ç¦æ­¢è¡Œä¸ºã€‘\n- âŒ ä¸è¦è®©è§’è‰²\"ç¡®è®¤\"æ€€å­•ï¼ˆé™¤éçœ‹åŒ»ç”Ÿï¼‰\n- âŒ ä¸è¦æåŠå…·ä½“å­•å‘¨ã€é¢„äº§æœŸç­‰ç»†èŠ‚\n</PregnancyAwareness>\n            `.trim());\n        }\n        \n        // ç¡®è®¤æœŸ\n        else if (data.awarenessStage === 'confirmed') {\n            guidances.push(`\n<PregnancyAwareness character=\"${charName}\" stage=\"confirmed\" awareness=\"${data.awareness}\">\nã€è§’è‰²è®¤çŸ¥çŠ¶æ€ã€‘${info.icon} ${info.name}ï¼ˆå¯Ÿè§‰åº¦: ${data.awareness}/100ï¼‰\n\nã€æ ¸å¿ƒåŸåˆ™ã€‘\nâœ“ ${charName} ç¡®è®¤è‡ªå·±æ€€å­•ï¼Œä½†ç¼ºä¹è¯¦ç»†ä¿¡æ¯\n\nã€è§’è‰²è®¤çŸ¥ã€‘\n- âœ… ç¡®è®¤è‡ªå·±æ€€å­•\n- âš ï¸ å¯èƒ½çŸ¥é“å¤§è‡´å­•å‘¨ï¼ˆ${weeks}å‘¨å·¦å³ï¼‰\n- ${data.knownInfo.dueDate ? 'âœ…' : 'âŒ'} ${data.knownInfo.dueDate ? 'çŸ¥é“' : 'ä¸çŸ¥é“'}é¢„äº§æœŸ\n- ${data.knownInfo.fetusCount ? 'âœ…' : 'âŒ'} ${data.knownInfo.fetusCount ? 'çŸ¥é“' : 'ä¸çŸ¥é“'}èƒå„¿æ•°é‡\n\nã€å½“å‰å®¢è§‚ç—‡çŠ¶ã€‘\n${getSymptomsByWeek(weeks)}\n\nã€å…è®¸æè¿°ã€‘\n- âœ… è§’è‰²è¯´\"æˆ‘æ€€å­•äº†\"\n- âœ… è§’è‰²å‘Šè¯‰ä»–äººè¿™ä¸ªæ¶ˆæ¯\n- âœ… è§’è‰²è€ƒè™‘äº§æ£€ã€ç”Ÿè‚²ç­‰é—®é¢˜\n- âœ… æ ¹æ®æ€§æ ¼ï¼šè®¡åˆ’/é€ƒé¿/æ„¤æ€’/å†·æ¼ /å–œæ‚¦/ææƒ§\n</PregnancyAwareness>\n            `.trim());\n        }\n        \n        // å®Œå…¨å¯Ÿè§‰æœŸ\n        else if (data.awarenessStage === 'fully_aware') {\n            guidances.push(`\n<PregnancyAwareness character=\"${charName}\" stage=\"fully_aware\" awareness=\"${data.awareness}\">\nã€è§’è‰²è®¤çŸ¥çŠ¶æ€ã€‘${info.icon} ${info.name}ï¼ˆå¯Ÿè§‰åº¦: ${data.awareness}/100ï¼‰\n\nã€æ ¸å¿ƒåŸåˆ™ã€‘\nğŸ“‹ ${charName} å®Œå…¨äº†è§£è‡ªå·±çš„æ€€å­•çŠ¶å†µ\n\nã€è§’è‰²è®¤çŸ¥ã€‘\n- âœ… å®Œå…¨ç¡®è®¤æ€€å­•\n- âœ… çŸ¥é“å­•å‘¨ï¼š${weeks}å‘¨ï¼ˆ${data.days}å¤©ï¼‰\n- âœ… çŸ¥é“é¢„äº§æœŸï¼šå¤§çº¦${Math.max(0, 280 - data.days)}å¤©å\n- âœ… çŸ¥é“èƒå„¿æ•°é‡ï¼š${data.fetusCount || 1}ä¸ª\n\nã€å½“å‰å®¢è§‚ç—‡çŠ¶ã€‘\n${getSymptomsByWeek(weeks)}\n\nã€å…è®¸æè¿°ã€‘\n- âœ… è§’è‰²æåŠå…·ä½“å­•å‘¨ã€é¢„äº§æœŸ\n- âœ… è§’è‰²æœ‰æ„è¯†åœ°æŠšæ‘¸è‚šå­ã€å’Œèƒå„¿è¯´è¯\n- âœ… è§’è‰²è§„åˆ’äº§æ£€ã€å¾…äº§åŒ…ç­‰\n- âœ… æ ¹æ®æ€§æ ¼è‡ªç”±å‘æŒ¥å¯¹æ€€å­•çš„æ€åº¦\n\nã€æ³¨æ„ã€‘\n- è§’è‰²\"çŸ¥é“\"ä¸ç­‰äº\"åœ¨æ„\"\n- å†·æ¼ çš„è§’è‰²ï¼šçŸ¥é“æ‰€æœ‰ä¿¡æ¯ä½†ä¸å…³å¿ƒ\n- æ¯æ€§çš„è§’è‰²ï¼šç»†å¿ƒå…³æ³¨æ¯ä¸ªç»†èŠ‚\n</PregnancyAwareness>\n            `.trim());\n        }\n    }\n}\n\nif (guidances.length > 0) {\n    injectPrompt('pregnancy_awareness', guidances.join('\\n\\n'));\n}\n_%>",
      "constant": false,
      "selective": false,
      "selectiveLogic": 0,
      "addMemo": true,
      "order": 45,
      "position": 0,
      "disable": false,
      "excludeRecursion": false,
      "probability": 100,
      "useProbability": true
    },
    {
      "uid": 9,
      "key": [],
      "keysecondary": [],
      "comment": "[RENDER:AFTER] Pregnancy Status Display",
      "content": "@@render_after\n@@message_formatting\n<%\nif (is_user || is_system) return;\n\nconst allVars = variables;\n\nfor (const key in allVars) {\n    if (key.startsWith('pregnancy.') && !key.includes('.config')) {\n        const charName = key.replace('pregnancy.', '');\n        const data = getvar(key);\n        \n        if (!data || !data.isPregnant) continue;\n        \n        const fatherInfo = data.father ? ` | ğŸ‘¨ ${data.father}` : '';\n        \n        // åˆ†å¨©çŠ¶æ€æ˜¾ç¤º\n        if (data.laborStage !== 'none' && data.laborStage !== 'delivered') {\n            const desc = pregnancySystem.getLaborStageDescription(charName);\n            \n            print(`\n<div style=\"margin:10px 0;padding:12px;background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);border-radius:8px;color:white;font-family:sans-serif;\">\n    <div style=\"font-weight:bold;font-size:1.1em;margin-bottom:8px;\">\n        ğŸ¤° ${charName} - ${desc.name}\n    </div>\n    <div style=\"background:rgba(255,255,255,0.2);border-radius:4px;height:20px;margin:8px 0;overflow:hidden;\">\n        <div style=\"background:rgba(255,255,255,0.8);height:100%;width:${data.birthProgress}%;transition:width 0.3s;display:flex;align-items:center;justify-content:center;font-size:0.85em;color:#333;\">\n            ${data.birthProgress}%\n        </div>\n    </div>\n    <div style=\"font-size:0.9em;opacity:0.95;\">\n        â±ï¸ ${data.laborHours.toFixed(1)} / ${data.totalLaborHours} å°æ—¶${fatherInfo}\n    </div>\n</div>\n            `.trim());\n        }\n        // è¿‡æœŸå¦Šå¨ æ˜¾ç¤º\n        else if (data.isOverdue && data.laborStage === 'none') {\n            const weeks = Math.floor(data.days / 7);\n            const config = getvar('pregnancy.config', { defaults: {} });\n            const maxDays = config.maxOverdueDays || 14;\n            \n            let riskColor = '#4CAF50';\n            if (data.overdueDays >= 10) riskColor = '#F44336';\n            else if (data.overdueDays >= 5) riskColor = '#FF9800';\n            \n            print(`\n<div style=\"margin:10px 0;padding:12px;background:linear-gradient(135deg, #FFA726 0%, #FB8C00 100%);border-radius:8px;color:white;font-family:sans-serif;\">\n    <div style=\"font-weight:bold;font-size:1.1em;margin-bottom:8px;\">\n        â° ${charName} - è¿‡æœŸå¦Šå¨ \n    </div>\n    <div style=\"background:rgba(255,255,255,0.2);border-radius:4px;padding:8px;margin:8px 0;\">\n        <div style=\"font-size:0.95em;\">\n            ğŸ“… å½“å‰: ${data.days}å¤© (${weeks}å‘¨) | è¿‡æœŸ: ${data.overdueDays}å¤©${fatherInfo}\n        </div>\n        <div style=\"background:rgba(0,0,0,0.2);border-radius:4px;height:16px;margin:6px 0;overflow:hidden;\">\n            <div style=\"background:${riskColor};height:100%;width:${Math.min(data.overdueDays / maxDays * 100, 100)}%;transition:width 0.3s;\"></div>\n        </div>\n    </div>\n</div>\n            `.trim());\n        }\n        // æ­£å¸¸æ€€å­• + å¯Ÿè§‰åº¦æ˜¾ç¤º\n        else if (data.laborStage === 'none') {\n            const info = pregnancySystem.getAwarenessStageInfo(charName);\n            const weeks = Math.floor(data.days / 7);\n            \n            const colors = {\n                'unaware': '#9E9E9E',\n                'suspect': '#FF9800',\n                'confirmed': '#2196F3',\n                'fully_aware': '#4CAF50'\n            };\n            const color = colors[data.awarenessStage] || '#9E9E9E';\n            \n            print(`\n<div style=\"margin:10px 0;padding:10px;background:linear-gradient(135deg, ${color} 0%, ${color}DD 100%);border-radius:8px;color:white;font-family:sans-serif;\">\n    <div style=\"font-weight:bold;font-size:1.05em;margin-bottom:6px;\">\n        ${info.icon} ${charName} - ${info.name}\n    </div>\n    <div style=\"background:rgba(255,255,255,0.2);border-radius:4px;height:16px;margin:6px 0;overflow:hidden;\">\n        <div style=\"background:rgba(255,255,255,0.8);height:100%;width:${data.awareness}%;transition:width 0.3s;display:flex;align-items:center;padding-left:4px;font-size:0.75em;color:#333;\">\n            ${data.awareness}%\n        </div>\n    </div>\n    <div style=\"font-size:0.85em;opacity:0.95;\">\n        ğŸ¤° ${weeks}å‘¨ (${data.days}å¤©) | è·é¢„äº§æœŸ: ${Math.max(0, 280 - data.days)}å¤©${fatherInfo}\n    </div>\n    ${data.awarenessStage === 'unaware' ? `\n    <div style=\"font-size:0.8em;opacity:0.9;margin-top:4px;font-style:italic;\">\n        ğŸ’­ ${charName}è¿˜æ²¡æœ‰æ„è¯†åˆ°...\n    </div>\n    ` : ''}\n</div>\n            `.trim());\n        }\n    }\n}\n_%>",
      "constant": false,
      "selective": false,
      "selectiveLogic": 0,
      "addMemo": true,
      "order": 10,
      "position": 0,
      "disable": false,
      "excludeRecursion": false,
      "probability": 100,
      "useProbability": true
    }
  ]
}
